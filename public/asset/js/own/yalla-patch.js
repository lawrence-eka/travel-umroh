yalla.utils.fetch=function(url,postData){function createXMLHTTPObject(){for(var xmlhttp=!1,i=0;i<XMLHttpFactories.length;i++){try{xmlhttp=XMLHttpFactories[i]()}catch(e){continue}break}return xmlhttp}var XMLHttpFactories=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}];return new Promise(function(resolve,reject){if(scriptCache.scripts[url]&&scriptCache.scripts[url].req)return void resolve(scriptCache.scripts[url].req);if(scriptCache.addPromise(url,null,resolve,reject)){var req=createXMLHTTPObject();if(req.timeout=2e3,req){var method=postData?"POST":"GET";req.open(method,url,!0),postData&&req.setRequestHeader("Content-type","application/json"),req.ontimeout=function(){scriptCache.setScript(url)},req.onreadystatechange=function(){if(4==req.readyState)return 200!=req.status&&304!=req.status?void scriptCache.setScript(url,null):void scriptCache.setScript(url,req)},4!=req.readyState&&req.send(JSON.stringify(postData))}}})},yalla.framework.attachScriptToDocument=function(url){var componentPath=url.substring(0,url.length-".js".length);return componentPath in yalla.components?Promise.resolve(!0):url in yalla.framework.componentLoadListener?Promise.resolve(!0):new Promise(function(resolve){var s=null;if(url.indexOf(".js")>=0)s=document.createElement("script"),s.type="text/javascript",s.text=scriptCache.scripts["."+url].req.responseText;else{s=document.createElement("style"),s.type="text/css";var css=scriptCache.scripts["."+url].req.responseText;s.styleSheet?s.styleSheet.cssText=css:s.appendChild(document.createTextNode(css))}document.head.appendChild(s),yalla.framework.componentLoadListener[url]=function(){resolve(url),delete yalla.framework.componentLoadListener[url]},resolve(url)})};