function Alert(alertType,patchFunction,refName){var self=this;self._text=[],self._type=alertType?alertType:"error",self.patchChanges=patchFunction,self.refName=refName,self.onError=new Event,self.text=function(){return self._text},self.type=function(){return self._type},self.alert=function(text,type){if(self._text=self.toArrayofMessages(text),self._type=type?type:self._type,self.patchChanges){var refs=[].concat(self.refName);for(var i in refs)self.patchChanges(refs[i])}},self.toArrayofMessages=function(message){var result=[];if(message){if("string"==typeof message)result.push({message:message});else if(message.hasOwnProperty("message"))result.push({name:message.name,message:message.message});else if(message.hasOwnProperty("error"))result.push({message:message.error});else if(message.hasOwnProperty("errors")){var errorList=[];message.errors.length?errorList=message.errors:errorList.push(message.errors);for(var i in errorList)for(var name in errorList[i])errorList[i].hasOwnProperty(name)&&result.push({name:name,message:errorList[i][name]})}}else result=[];var finalResult=[];for(var idx in result)""!=result[idx].message&&(result[idx].message=result[idx].message.toSentenceCase(),finalResult.push(result[idx]));return self.onError.publish(finalResult),finalResult}}