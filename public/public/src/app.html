<inject from="/user/login-form" name="login-panel"></inject>
<inject from="/component/header" name="app-header"></inject>
<inject from="/component/footer" name="app-footer"></inject>
<app-header></app-header>

<div class="container">
    <div data.load="checkCurrentUser()">
        <div if.bind="data">
            <slot-view></slot-view>
        </div>
        <div if.bind="!data">
            <login-panel></login-panel>
        </div>
    </div>
</div>

<app-footer></app-footer>

<script>
    debugger;
    function checkCurrentUser(){
        return new Promise(function(resolve){
            dpd.users.me(function(me) {
                //alert('current user');
                resolve(me);
            });
        });
    }

</script>