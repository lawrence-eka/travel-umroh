<div>
    {{errorMessage}}
</div>
<div>
    Please Log In
    <form submit.trigger="login(this)">
        <p>Username: <input type="text" name="userName"></p>
        <p>Password: <input type="password" name="password"></p>
        <p><input type="submit" value="Login"></p>
        <p><a href="#user.registration">Register</a></p>
    </form>
</div>
<div>
    {{errorMessage}}
</div>
<script>

    var errorMessage = '';

    function login(form){
        var userName = form.elements.userName.value;
        var password = form.elements.password.value;
        dpd.users.login({"username": userName, "password": password}, function(user, err) {
            if(err){
                errorMessage = JSON.stringify(err);
                $patchChanges();
            }else{
                window.location.hash = '#app/home';
            }
        });
        return false;
    }
</script>

