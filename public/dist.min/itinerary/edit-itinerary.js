yalla.framework.addComponent("/dist/itinerary/edit-itinerary",function(){function e(e,t,n,r){this.data=t,this.target=n,this.type=e,this.currentTarget=r}function t(e){return{}}function n(e){}function t(e){return{entryType:e.entryType,itineraryId:e.itineraryId,packageId:e.packageId,datePair:{departure:new DatePair(p),checkIn:new DatePair(p,null,1)},transportType:"",alert:new Alert}}function r(){var e=this;return new Promise(function(t){(new Utils).itineraries.recommendedNewDates(e.state.packageId).then(function(n){if(e.state.datePair.departure.setDefaults(null,null,n),e.state.datePair.checkIn.setDefaults(null,null,n),e.state.itineraryId){var r={packageId:e.state.packageId,id:e.state.itineraryId};dpd.itineraries.get(r,function(n,r){e.state.alert.alert(r),n&&(e.state.entryType=n.entry.transport?"Transport":"Hotel",t(n))})}else t({packageId:e.state.packageId,entry:{}})})})}function a(){this.state.transportType=this.target.value,p("spanTransport")}function i(){return"Plane"==this.state.transportType?"Airline":this.state.transportType+" Info"}function o(){this.emitEvent("close")}function c(e,t){var n=this.target.form,t={};t.id=n.elements.id.value,t.packageId=n.elements.packageId.value,t.entry={},t.remarks=n.elements.remarks.value,"Hotel"==this.state.entryType?(t.entry.hotel=n.elements.hotel.value,t.entry.city=n.elements.city.value,t.entry.checkIn=new Date(n.elements.checkIn.value).setHours(23,59,59),t.entry.checkOut=new Date(n.elements.checkOut.value).setHours(23,59,59)):(t.entry.transport=n.elements.transport.value,t.entry.transportType=n.elements.transportType.value,t.entry.departFrom=n.elements.departFrom.value,t.entry.arriveAt=n.elements.arriveAt.value,t.entry.departure=new Date(n.elements.departure.value).getTime(),t.entry.arrival=new Date(n.elements.arrival.value).getTime());var r=this;""==t.id?dpd.itineraries.post(t,function(e,t){r.state.alert.alert(t),e&&r.emitEvent("close"),p()}):dpd.itineraries.put(t.id,t,function(e,t){r.state.alert.alert(t),e&&r.emitEvent("close"),p()})}function s(e){return this.state.entryType==e?"":"custom-set-hidden"}function l(l,d){h("link",""),I("element","dist.itinerary.edit-itinerary"),I("href","asset/css/custom-style.css"),I("rel","stylesheet"),k("link"),g("link"),y.entry=m("/component/entry");y.entry;y.alert=m("/component/alert");y.alert;y.panel=m("/component/panel");y.panel;h("div",""),I("element","dist.itinerary.edit-itinerary"),k("div");var T=IncrementalDOM.currentElement(),b=yalla.framework.validComponentName(T,u);T._state=T._state&&b?T._state:t.bind(T)(l),T._state._name=u;var w=T._state,O={component:T,properties:l,state:T._state};b&&yalla.framework.propertyCheckChanges(T._properties,l,n.bind(O)),T._properties=l;var _={title:(w.itineraryId?"Edit":"New")+" Entry",nofooter:"nofooter"};y.panel.render("object"==typeof arguments[1]?f(arguments[1],_):_,function(t,n){"body"===t&&(h("div",""),k("div"),function(t){function n(t){h("form",""),k("form"),h("input",""),I("type","hidden"),I("name","id"),I("value",t.id),k("input"),g("input"),h("input",""),I("type","hidden"),I("name","packageId"),I("value",t.packageId),k("input"),g("input"),h("div",""),I("class",s.bind(d)("Transport")),k("div"),h("div",""),I("class","row"),k("div");var n={type:"select",name:"transportType",value:t.entry.transportType,prompt:"Transport",entries:["Plane","Bus","Train","Car","Ship"],onchange:function(t){var n={target:t.target};n.properties=l,"elements"in n.target&&(n.elements=n.target.elements),n.currentTarget=this==t.target?n.target:v(t.currentTarget),n.component=T,n.component._state=n.component._state||{},n.state=n.component._state,n.emitEvent=function(t,r){var a=new e(t,r,n.target,n.currentTarget);"on"+t in l&&l["on"+t](a)},a.bind(n)()}};y.entry.render("object"==typeof arguments[1]?f(arguments[1],n):n,function(e,t){}),g("div"),h("div",""),I("class","row"),k("div"),h("div",""),k("div"),yalla.framework.registerRef("spanTransport",IncrementalDOM.currentElement(),function(){var e={type:"text",name:"transport",prompt:i.bind(d)(),value:t.entry.transport};y.entry.render("object"==typeof arguments[1]?f(arguments[1],e):e,function(e,t){})})(),g("div");var n={type:"datetime-local",name:"departure",prompt:"Departure",value:t.entry.departure?t.entry.departure.toYYYYMMDD(!0):w.datePair.departure.defaultStartDate(!0),min:w.datePair.departure.minStartDate.bind(d)(!0),onfocusout:function(t){var n={target:t.target};n.properties=l,"elements"in n.target&&(n.elements=n.target.elements),n.currentTarget=this==t.target?n.target:v(t.currentTarget),n.component=T,n.component._state=n.component._state||{},n.state=n.component._state,n.emitEvent=function(t,r){var a=new e(t,r,n.target,n.currentTarget);"on"+t in l&&l["on"+t](a)},w.datePair.departure.onStartDateFocusOut.bind(n)("arrival")}};y.entry.render("object"==typeof arguments[1]?f(arguments[1],n):n,function(e,t){});var n={type:"text",name:"departFrom",prompt:"Depart From",value:t.entry.departFrom};y.entry.render("object"==typeof arguments[1]?f(arguments[1],n):n,function(e,t){}),h("div",""),k("div"),yalla.framework.registerRef("arrival",IncrementalDOM.currentElement(),function(){var e={type:"datetime-local",name:"arrival",prompt:"Arrival",value:t.entry.arrival?t.entry.arrival.toYYYYMMDD(!0):w.datePair.departure.defaultEndDate(!0),min:w.datePair.departure.minEndDate.bind(d)(!0)};y.entry.render("object"==typeof arguments[1]?f(arguments[1],e):e,function(e,t){})})(),g("div");var n={type:"text",name:"arriveAt",prompt:"Arrive At",value:t.entry.arriveAt};y.entry.render("object"==typeof arguments[1]?f(arguments[1],n):n,function(e,t){}),g("div"),g("div"),h("div",""),I("class",s.bind(d)("Hotel")),k("div"),h("div",""),I("class","row"),k("div");var n={type:"date",name:"checkIn",class:"form-control input-sm",prompt:"Check In",value:t.entry.checkIn?t.entry.checkIn.toYYYYMMDD():w.datePair.checkIn.defaultStartDate(),min:w.datePair.checkIn.minStartDate.bind(d)(),onfocusout:function(t){var n={target:t.target};n.properties=l,"elements"in n.target&&(n.elements=n.target.elements),n.currentTarget=this==t.target?n.target:v(t.currentTarget),n.component=T,n.component._state=n.component._state||{},n.state=n.component._state,n.emitEvent=function(t,r){var a=new e(t,r,n.target,n.currentTarget);"on"+t in l&&l["on"+t](a)},w.datePair.checkIn.onStartDateFocusOut.bind(n)("checkOut")}};y.entry.render("object"==typeof arguments[1]?f(arguments[1],n):n,function(e,t){}),h("span",""),k("span"),yalla.framework.registerRef("checkOut",IncrementalDOM.currentElement(),function(){var e={type:"date",name:"checkOut",class:"form-control input-sm",prompt:"Check Out",value:t.entry.checkOut?t.entry.checkOut.toYYYYMMDD():w.datePair.checkIn.defaultEndDate(),min:w.datePair.checkIn.minEndDate.bind(d)()};y.entry.render("object"==typeof arguments[1]?f(arguments[1],e):e,function(e,t){})})(),g("span");var n={type:"text",name:"hotel",prompt:"Hotel",value:t.entry.hotel};y.entry.render("object"==typeof arguments[1]?f(arguments[1],n):n,function(e,t){});var n={type:"text",name:"city",prompt:"City",value:t.entry.city};y.entry.render("object"==typeof arguments[1]?f(arguments[1],n):n,function(e,t){}),g("div"),g("div"),h("div",""),I("class","row"),k("div");var n={type:"textarea",name:"remarks",prompt:"Remarks",value:t.remarks};y.entry.render("object"==typeof arguments[1]?f(arguments[1],n):n,function(e,t){}),g("div");var n={alertType:w.alert.type.bind(d)(),message:w.alert.text.bind(d)()};y.alert.render("object"==typeof arguments[1]?f(arguments[1],n):n,function(e,t){}),h("div",""),I("class","row"),k("div");var n={type:"button",value:"Save",divClass:"col-xs-6 col-sm-6 col-md-6 col-lg-6",onclick:function(t){var n={target:t.target};n.properties=l,"elements"in n.target&&(n.elements=n.target.elements),n.currentTarget=this==t.target?n.target:v(t.currentTarget),n.component=T,n.component._state=n.component._state||{},n.state=n.component._state,n.emitEvent=function(t,r){var a=new e(t,r,n.target,n.currentTarget);"on"+t in l&&l["on"+t](a)},c.bind(n)()}};y.entry.render("object"==typeof arguments[1]?f(arguments[1],n):n,function(e,t){});var n={type:"button",value:"Cancel",divClass:"col-xs-6 col-sm-6 col-md-6 col-lg-6",onclick:function(t){var n={target:t.target};n.properties=l,"elements"in n.target&&(n.elements=n.target.elements),n.currentTarget=this==t.target?n.target:v(t.currentTarget),n.component=T,n.component._state=n.component._state||{},n.state=n.component._state,n.emitEvent=function(t,r){var a=new e(t,r,n.target,n.currentTarget);"on"+t in l&&l["on"+t](a)},o.bind(n)()}};y.entry.render("object"==typeof arguments[1]?f(arguments[1],n):n,function(e,t){}),g("div"),g("form")}var m=t.element,d={target:m};d.properties=l,"elements"in d.target&&(d.elements=d.target.elements),d.currentTarget=d.target,d.component=T,d.component._state=d.component._state||{},d.state=d.component._state;var u=r.bind(d)();u&&"object"==typeof u&&"then"in u?(D(),u.then(function(e){p(m,function(){n.call(d,e)})}).catch(function(e){console.log(e)})):n.call(d,u)}({element:IncrementalDOM.currentElement(),pointer:IncrementalDOM.currentPointer()}),g("div"))}),g("div")}var p=yalla.framework.renderToScreen,m=yalla.framework.createInjector("/dist/itinerary/edit-itinerary"),d={},u="dist.itinerary.edit-itinerary",y={},v=yalla.framework.getParentComponent,f=yalla.utils.merge,g=(IncrementalDOM.elementOpen,IncrementalDOM.elementClose),h=IncrementalDOM.elementOpenStart,k=IncrementalDOM.elementOpenEnd,I=(IncrementalDOM.elementVoid,IncrementalDOM.text,IncrementalDOM.attr),D=IncrementalDOM.skip;return"function"==typeof l&&(d.render=l),d}());