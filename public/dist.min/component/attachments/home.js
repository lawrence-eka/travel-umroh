yalla.framework.addComponent("/dist/component/attachments/home",function(){function e(e,t,n,r){this.data=t,this.target=n,this.type=e,this.currentTarget=r}function t(e){return{}}function n(e){}function t(e){return e.onSave&&e.onSave.subscribe(l.bind(this)),{alert:new Alert(null,s,"alert"),newFiles:[],delFiles:[],collection:e.collection,userId:e.userId}}function r(){var e=this;return new Promise(function(t){var n={};e.state.userId&&(n.uploaderId=e.state.userId),dpd[e.state.collection].get(n,function(e,n,r,a){t(e)})})}function a(e){this.state.delFiles=this.state.delFiles.concat(e.data)}function o(){var e=this.target.form;this.state.newFiles=this.state.newFiles.concat(e.elements.addFile.files[0]),e.reset(),s("newFiles")}function l(){var e=this,t=new FormData;for(var n in e._state.newFiles)t.append("uploadedFile",e._state.newFiles[n]);var r=new XMLHttpRequest;r.open("POST","/"+e._state.collection),r.onload=function(){JSON.parse(this.responseText);e._state.alert.alert(null)},r.onerror=function(t){e._state.alert.alert(t)},r.send(t);for(var n in e._state.delFiles)dpd[e._state.collection].del(e._state.delFiles[n],function(e,t){})}function i(l,i){p.list=c("/component/attachments/list");p.list;p.entry=c("/component/entry");p.entry;p.alert=c("/component/alert");p.alert;g("div",""),h("element","dist.component.attachments.home"),y("div");var m=IncrementalDOM.currentElement(),w=yalla.framework.validComponentName(m,d);m._state=m._state&&w?m._state:t.bind(m)(l),m._state._name=d;var I=m._state,O={component:m,properties:l,state:m._state};w&&yalla.framework.propertyCheckChanges(m._properties,l,n.bind(O)),m._properties=l,function(t){function n(t){g("div",""),h("class","container"),y("div");var n={naked:"naked",type:"label",prompt:l.prompt};if(p.entry.render("object"==typeof arguments[1]?f(arguments[1],n):n,function(e,t){}),v("div"),g("div",""),y("div"),yalla.framework.registerRef("existingFiles",IncrementalDOM.currentElement(),function(){var n={list:t,folder:"upload/",ondelete:function(t){var n={target:t.target};n.properties=l,"elements"in n.target&&(n.elements=n.target.elements),n.currentTarget=this==t.target?n.target:u(t.currentTarget),n.component=m,n.component._state=n.component._state||{},n.state=n.component._state,n.emitEvent=function(t,r){var a=new e(t,r,n.target,n.currentTarget);"on"+t in l&&l["on"+t](a)},a.bind(n)(t)},readonly:l.readonly};p.list.render("object"==typeof arguments[1]?f(arguments[1],n):n,function(e,t){})})(),v("div"),g("div",""),y("div"),yalla.framework.registerRef("newFiles",IncrementalDOM.currentElement(),function(){var e={list:I.newFiles};p.list.render("object"==typeof arguments[1]?f(arguments[1],e):e,function(e,t){})})(),v("div"),!l.readonly){g("div",""),y("div"),g("form",""),y("form");var n={type:"file",name:"addFile",onchange:function(t){var n={target:t.target};n.properties=l,"elements"in n.target&&(n.elements=n.target.elements),n.currentTarget=this==t.target?n.target:u(t.currentTarget),n.component=m,n.component._state=n.component._state||{},n.state=n.component._state,n.emitEvent=function(t,r){var a=new e(t,r,n.target,n.currentTarget);"on"+t in l&&l["on"+t](a)},o.bind(n)()}};p.entry.render("object"==typeof arguments[1]?f(arguments[1],n):n,function(e,t){}),v("form"),v("div")}g("span",""),y("span"),yalla.framework.registerRef("alert",IncrementalDOM.currentElement(),function(){var e={alertType:I.alert.type.bind(c)(),message:I.alert.text.bind(c)()};p.alert.render("object"==typeof arguments[1]?f(arguments[1],e):e,function(e,t){})})(),v("span")}var i=t.element,c={target:i};c.properties=l,"elements"in c.target&&(c.elements=c.target.elements),c.currentTarget=c.target,c.component=m,c.component._state=c.component._state||{},c.state=c.component._state;var d=r.bind(c)();d&&"object"==typeof d&&"then"in d?(_(),d.then(function(e){s(i,function(){n.call(c,e)})}).catch(function(e){console.log(e)})):n.call(c,d)}({element:IncrementalDOM.currentElement(),pointer:IncrementalDOM.currentPointer()}),v("div")}var s=yalla.framework.renderToScreen,c=yalla.framework.createInjector("/dist/component/attachments/home"),m={},d="dist.component.attachments.home",p={},u=yalla.framework.getParentComponent,f=yalla.utils.merge,v=(IncrementalDOM.elementOpen,IncrementalDOM.elementClose),g=IncrementalDOM.elementOpenStart,y=IncrementalDOM.elementOpenEnd,h=(IncrementalDOM.elementVoid,IncrementalDOM.text,IncrementalDOM.attr),_=IncrementalDOM.skip;return"function"==typeof i&&(m.render=i),m}());