yalla.framework.addComponent("/dist/passenger/edit-passenger",function(){function e(e,t,a,n){this.data=t,this.target=a,this.type=e,this.currentTarget=n}function t(e){return{}}function a(e){}function t(e){return{id:e.id,bookingId:e.bookingId,alert:new Alert(null,p,"alert"),passport:new PassportDatePair(p)}}function n(){this.emitEvent("cancelled")}function r(){var e=this;return new Promise(function(t){dpd.passengers.get(e.state.id,function(a,n){e.state.alert.alert(n),n||t(a)})})}function o(){var e=this,t=e.target.form.elements,a={};a.bookingId=t.bookingId.value,a.id=t.id.value,a.firstName=t.firstName.value,a.middleName=t.middleName.value,a.lastName=t.lastName.value,a.birthPlace=t.birthPlace.value,a.birthday=new Date(t.birthday.value).getTime(),a.passportNumber=t.passportNumber.value,a.passportIssuer=t.passportIssuer.value,a.passportIssueDate=new Date(t.passportIssueDate.value).getTime(),a.passportExpiryDate=new Date(t.passportExpiryDate.value).getTime(),t.firstName.value="",t.middleName.value="",t.lastName.value="",t.birthPlace.value="",t.birthday.value="",t.passportNumber.value="",t.passportIssuer.value="",t.passportIssueDate.value="",t.passportExpiryDate.value="",a.id?dpd.passengers.put(a.id,a,function(t,a){e.state.alert.alert(a),a||e.emitEvent("saved")}):dpd.passengers.post(a,function(t,a){e.state.alert.alert(a),a||e.emitEvent("saved")})}function s(s,l){c.alert=i("/component/alert");c.alert;c.entry=i("/component/entry");c.entry;c.panel=i("/component/panel");c.panel;c.ppLink=i("/component/ppLink");c.ppLink;v("div",""),g("element","dist.passenger.edit-passenger"),y("div");var D=IncrementalDOM.currentElement(),I=yalla.framework.validComponentName(D,m);D._state=D._state&&I?D._state:t.bind(D)(s),D._state._name=m;var h=D._state,N={component:D,properties:s,state:D._state};I&&yalla.framework.propertyCheckChanges(D._properties,s,a.bind(N)),D._properties=s;var k={title:"Passenger Detail"};c.panel.render("object"==typeof arguments[1]?d(arguments[1],k):k,function(t,a){if("body"===t&&(v("div",""),y("div"),function(t){function a(t){v("form",""),g("role","form"),y("form"),v("span",""),y("span"),yalla.framework.registerRef("alert",IncrementalDOM.currentElement(),function(){var a={type:"hidden",name:"bookingId",value:h.bookingId};c.entry.render("object"==typeof arguments[1]?d(arguments[1],a):a,function(e,t){});var a={type:"hidden",name:"id",value:t.id};c.entry.render("object"==typeof arguments[1]?d(arguments[1],a):a,function(e,t){});var a={type:"text",prompt:"First Name",name:"firstName",value:t.firstName,alert:h.alert};c.entry.render("object"==typeof arguments[1]?d(arguments[1],a):a,function(e,t){});var a={type:"text",prompt:"Middle Name",name:"middleName",value:t.middleName,alert:h.alert};c.entry.render("object"==typeof arguments[1]?d(arguments[1],a):a,function(e,t){});var a={type:"text",prompt:"Last Name",name:"lastName",value:t.lastName,alert:h.alert};c.entry.render("object"==typeof arguments[1]?d(arguments[1],a):a,function(e,t){});var a={type:"text",prompt:"Birth Place",name:"birthPlace",value:t.birthPlace,alert:h.alert};c.entry.render("object"==typeof arguments[1]?d(arguments[1],a):a,function(e,t){});var a={type:"date",prompt:"Birthday",name:"birthday",value:(t.birthday?t.birthday:new Date).toYYYYMMDD(),max:(new Date).toYYYYMMDD(),alert:h.alert};c.entry.render("object"==typeof arguments[1]?d(arguments[1],a):a,function(e,t){});var a={type:"text",prompt:"Passport Number",name:"passportNumber",value:t.passportNumber,alert:h.alert};c.entry.render("object"==typeof arguments[1]?d(arguments[1],a):a,function(e,t){});var a={type:"date",prompt:"Passport Issue Date",name:"passportIssueDate",value:h.passport.defaultStartDate.bind(l)(t.passportIssueDate),min:h.passport.minStartDate.bind(l)(),max:h.passport.maxStartDate.bind(l)(),onfocusout:function(t){var a={target:t.target};a.properties=s,"elements"in a.target&&(a.elements=a.target.elements),a.currentTarget=this==t.target?a.target:u(t.currentTarget),a.component=D,a.component._state=a.component._state||{},a.state=a.component._state,a.emitEvent=function(t,n){var r=new e(t,n,a.target,a.currentTarget);"on"+t in s&&s["on"+t](r)},h.passport.onStartDateFocusOut.bind(a)("passportExpiryDate")},alert:h.alert};c.entry.render("object"==typeof arguments[1]?d(arguments[1],a):a,function(e,t){}),v("span",""),y("span"),yalla.framework.registerRef("passportExpiryDate",IncrementalDOM.currentElement(),function(){var e={type:"date",prompt:"Passport Expiry Date",name:"passportExpiryDate",value:h.passport.defaultEndDate.bind(l)(t.passportExpiryDate),min:h.passport.minEndDate.bind(l)(),max:h.passport.maxEndDate.bind(l)(),alert:h.alert};c.entry.render("object"==typeof arguments[1]?d(arguments[1],e):e,function(e,t){})})(),f("span");var a={type:"text",prompt:"Passport Issuer",name:"passportIssuer",value:t.passportIssuer,alert:h.alert};c.entry.render("object"==typeof arguments[1]?d(arguments[1],a):a,function(e,t){});var a={type:"button",name:"btnRegister",divClass:"col-xs-6 col-sm-6 col-md-6 col-lg-6",value:h.id?"Save":"Register",onclick:function(t){var a={target:t.target};a.properties=s,"elements"in a.target&&(a.elements=a.target.elements),a.currentTarget=this==t.target?a.target:u(t.currentTarget),a.component=D,a.component._state=a.component._state||{},a.state=a.component._state,a.emitEvent=function(t,n){var r=new e(t,n,a.target,a.currentTarget);"on"+t in s&&s["on"+t](r)},o.bind(a)()}};c.entry.render("object"==typeof arguments[1]?d(arguments[1],a):a,function(e,t){});var a={type:"button",name:"btnRegister",divClass:"col-xs-6 col-sm-6 col-md-6 col-lg-6",value:"Cancel",onclick:function(t){var a={target:t.target};a.properties=s,"elements"in a.target&&(a.elements=a.target.elements),a.currentTarget=this==t.target?a.target:u(t.currentTarget),a.component=D,a.component._state=a.component._state||{},a.state=a.component._state,a.emitEvent=function(t,n){var r=new e(t,n,a.target,a.currentTarget);"on"+t in s&&s["on"+t](r)},n.bind(a)()}};c.entry.render("object"==typeof arguments[1]?d(arguments[1],a):a,function(e,t){})})(),f("span"),f("form")}var i=t.element,l={target:i};l.properties=s,"elements"in l.target&&(l.elements=l.target.elements),l.currentTarget=l.target,l.component=D,l.component._state=l.component._state||{},l.state=l.component._state;var m=r.bind(l)();m&&"object"==typeof m&&"then"in m?(b(),m.then(function(e){p(i,function(){a.call(l,e)})}).catch(function(e){console.log(e)})):a.call(l,m)}({element:IncrementalDOM.currentElement(),pointer:IncrementalDOM.currentPointer()}),f("div")),"footer"===t){v("div",""),y("div");var i={};c.ppLink.render("object"==typeof arguments[1]?d(arguments[1],i):i,function(e,t){}),f("div")}}),v("span",""),y("span"),yalla.framework.registerRef("alert",IncrementalDOM.currentElement(),function(){var e={alertType:h.alert.type.bind(self)(),message:h.alert.text.bind(self)()};c.alert.render("object"==typeof arguments[1]?d(arguments[1],e):e,function(e,t){})})(),f("span"),f("div")}var p=yalla.framework.renderToScreen,i=yalla.framework.createInjector("/dist/passenger/edit-passenger"),l={},m="dist.passenger.edit-passenger",c={},u=yalla.framework.getParentComponent,d=yalla.utils.merge,f=(IncrementalDOM.elementOpen,IncrementalDOM.elementClose),v=IncrementalDOM.elementOpenStart,y=IncrementalDOM.elementOpenEnd,g=(IncrementalDOM.elementVoid,IncrementalDOM.text,IncrementalDOM.attr),b=IncrementalDOM.skip;return"function"==typeof s&&(l.render=s),l}());