yalla.framework.addComponent("/dist/booking/card-booking",function(){function t(t,e,n,o){this.data=e,this.target=n,this.type=t,this.currentTarget=o}function e(t){return{}}function n(t){}function e(t){return{booking:t.booking,bookingUtils:(new Utils).bookings,status:(new Utils).bookings.status(t.booking),showOnly:t.showOnly,alert:new Alert(null,l,"alert")}}function n(t){t.booking&&(this.state.booking=t.booking.newValue,this.state.status=(new Utils).bookings.status(t.booking.newValue)),t.showOnly&&(this.state.showOnly=t.showOnly.newValue)}function o(){this.emitEvent("click",this.state.booking)}function a(){var t=this.state.booking,e=this;t.uniqueCode?window.location.hash="#app/booking.paymentDetails:bookingId="+t.id:(t.uniqueCode=Math.floor(1e3*Math.random()),t.totalPrice=t.costLandArrangements+t.costTickets+t.uniqueCode,t.waitingForPaymentUntil=(new Date).addHours(3).getTime(),dpd.bookings.put(t,function(n,o){e.state.alert.alert(o),o||(window.location.hash="#app/booking.paymentDetails:bookingId="+t.id)}))}function r(){window.location.hash="#app/passenger.home:bookingId="+this.state.booking.id}function i(){this.emitEvent("saved")}function s(){var t=this;return new Promise(function(e){0==t.state.status.code?dpd.bookings.del(t.state.booking.id,function(n){t.state.alert.alert(null),t.emitEvent("cancelled"),e(null)}):(t.state.booking.isCancelled=!0,dpd.bookings.put(t.state.booking.id,t.state.booking,function(n,o){t.state.alert.alert(o),o||t.emitEvent("cancelled"),e(null)}))})}function c(c,l){d.card=g("/component/panel");d.card;d.alert=g("/component/alert");d.alert;d.entry=g("/component/entry");d.entry;f("link",""),h("element","dist.booking.card-booking"),h("href","asset/css/custom-style.css"),h("rel","stylesheet"),v("link"),k("link"),f("div",""),h("element","dist.booking.card-booking"),v("div");var m=IncrementalDOM.currentElement(),w=yalla.framework.validComponentName(m,b);m._state=m._state&&w?m._state:e.bind(m)(c),m._state._name=b;var T=m._state,_={component:m,properties:c,state:m._state};w&&yalla.framework.propertyCheckChanges(m._properties,c,n.bind(_)),m._properties=c;var O={onclick:function(e){var n={target:e.target};n.properties=c,"elements"in n.target&&(n.elements=n.target.elements),n.currentTarget=this==e.target?n.target:u(e.currentTarget),n.component=m,n.component._state=n.component._state||{},n.state=n.component._state,n.emitEvent=function(e,o){var a=new t(e,o,n.target,n.currentTarget);"on"+e in c&&c["on"+e](a)},o.bind(n)()},title:"Package: "+T.booking.package.packageName};d.card.render("object"==typeof arguments[1]?p(arguments[1],O):O,function(e,n){if("body"===e){if(f("div",""),v("div"),y("Travel Date: "+T.booking.package.travelDateFrom.toStringDateRange(T.booking.package.travelDateUntil)),f("br",""),v("br"),k("br"),y("Operator: "+T.booking.travelAgent.travelAgentName),f("br",""),v("br"),k("br"),y("Land Arrangements: "+(T.booking.costLandArrangements?T.booking.costLandArrangements.toFormattedString():"")),f("br",""),v("br"),k("br"),y("Tickets: "+(T.booking.costTickets?T.booking.costTickets.toFormattedString():"")),f("br",""),v("br"),k("br"),y("Total passenger: "+(T.booking.numberOfPassengers?T.booking.numberOfPassengers:"")),f("br",""),v("br"),k("br"),y("Total Price: "+(T.booking.totalPrice?T.booking.totalPrice.toFormattedString():"")),f("br",""),v("br"),k("br"),y("Unique Code: "+(T.booking.uniqueCode?T.booking.uniqueCode:"")),f("br",""),v("br"),k("br"),y("Grand Total: "+(T.booking.totalPrice+T.booking.uniqueCode?(T.booking.totalPrice+T.booking.uniqueCode).toFormattedString():"")),f("br",""),v("br"),k("br"),y("Expiry Date: "+(T.booking.waitingForPaymentUntil?T.booking.waitingForPaymentUntil.toDateComponents(!1,!0):"")),f("br",""),v("br"),k("br"),!T.showOnly){f("div",""),v("div"),f("div",""),h("class","row"),v("div");var o={type:"button",name:"btnSave",value:T.status.code==T.bookingUtils.definingPassengers?"Save for Later":"Close",divClass:"col-xs-6 col-sm-6 col-md-6 col-lg-6",onclick:function(e){var n={target:e.target};n.properties=c,"elements"in n.target&&(n.elements=n.target.elements),n.currentTarget=this==e.target?n.target:u(e.currentTarget),n.component=m,n.component._state=n.component._state||{},n.state=n.component._state,n.emitEvent=function(e,o){var a=new t(e,o,n.target,n.currentTarget);"on"+e in c&&c["on"+e](a)},i.bind(n)()}};if(d.entry.render("object"==typeof arguments[1]?p(arguments[1],o):o,function(t,e){}),T.status.code==T.bookingUtils.definingPassengers||T.status.code==T.bookingUtils.waitingForPayment){var o={type:"button",name:"btnCancel",value:"Cancel Booking",divClass:"col-xs-6 col-sm-6 col-md-6 col-lg-6",onclick:function(e){var n={target:e.target};n.properties=c,"elements"in n.target&&(n.elements=n.target.elements),n.currentTarget=this==e.target?n.target:u(e.currentTarget),n.component=m,n.component._state=n.component._state||{},n.state=n.component._state,n.emitEvent=function(e,o){var a=new t(e,o,n.target,n.currentTarget);"on"+e in c&&c["on"+e](a)},s.bind(n)()}};d.entry.render("object"==typeof arguments[1]?p(arguments[1],o):o,function(t,e){})}var o={type:"button",name:"btnPassengers",value:"Passengers...",onclick:function(e){var n={target:e.target};n.properties=c,"elements"in n.target&&(n.elements=n.target.elements),n.currentTarget=this==e.target?n.target:u(e.currentTarget),n.component=m,n.component._state=n.component._state||{},n.state=n.component._state,n.emitEvent=function(e,o){var a=new t(e,o,n.target,n.currentTarget);"on"+e in c&&c["on"+e](a)},r.bind(n)()}};d.entry.render("object"==typeof arguments[1]?p(arguments[1],o):o,function(t,e){});var o={type:"button",name:"btnPaymentDetail",value:(T.status.code==T.bookingUtils.definingPassengers?"Next Step: ":"")+"Payment Detail",onclick:function(e){var n={target:e.target};n.properties=c,"elements"in n.target&&(n.elements=n.target.elements),n.currentTarget=this==e.target?n.target:u(e.currentTarget),n.component=m,n.component._state=n.component._state||{},n.state=n.component._state,n.emitEvent=function(e,o){var a=new t(e,o,n.target,n.currentTarget);"on"+e in c&&c["on"+e](a)},a.bind(n)()}};d.entry.render("object"==typeof arguments[1]?p(arguments[1],o):o,function(t,e){}),k("div"),k("div")}k("div")}"footer"===e&&(f("div",""),v("div"),f("strong",""),v("strong"),y("Status: "+T.status.text),k("strong"),k("div"))}),f("span",""),v("span"),yalla.framework.registerRef("alert",IncrementalDOM.currentElement(),function(){var t={alertType:T.alert.type.bind(self)(),message:T.alert.text.bind(self)()};d.alert.render("object"==typeof arguments[1]?p(arguments[1],t):t,function(t,e){})})(),k("span"),k("div")}var l=yalla.framework.renderToScreen,g=yalla.framework.createInjector("/dist/booking/card-booking"),m={},b="dist.booking.card-booking",d={},u=yalla.framework.getParentComponent,p=yalla.utils.merge,k=(IncrementalDOM.elementOpen,IncrementalDOM.elementClose),f=IncrementalDOM.elementOpenStart,v=IncrementalDOM.elementOpenEnd,y=(IncrementalDOM.elementVoid,IncrementalDOM.text),h=IncrementalDOM.attr;IncrementalDOM.skip;return"function"==typeof c&&(m.render=c),m}());