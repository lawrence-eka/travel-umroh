yalla.framework.addComponent("/dist/booking/paymentConfirmation",function(){function e(e,t,n,r){this.data=t,this.target=n,this.type=e,this.currentTarget=r}function t(e){return{}}function n(e){}function t(e){return{alert:new Alert(null,i,"alert")}}function r(){var e=this;return new Promise(function(t){var n={travelAgentContactPersonId:storage.me.read().id,isCancelled:!1,actualPayment:{$ne:null},$or:[{isPaymentConfirmed:null},{isPaymentConfirmed:0}]};dpd.bookings.get(n,function(n,r){e.state.alert.alert(r),r||t(n)})})}function a(e,t){var n={isPaymentConfirmed:t?1:-1},r=this;dpd.bookings.put(e,n,function(e,t){r.state.alert.alert(t),t||i()})}function o(o,c){s.panel=l("/component/panel");s.panel;s.entry=l("/component/entry");s.entry;s.alert=l("/component/alert");s.alert;g("link",""),y("element","dist.booking.paymentConfirmation"),y("href","asset/css/registration.css"),y("rel","stylesheet"),d("link"),u("link"),g("div",""),y("element","dist.booking.paymentConfirmation"),d("div");var k=IncrementalDOM.currentElement(),C=yalla.framework.validComponentName(k,m);k._state=k._state&&C?k._state:t.bind(k)(o),k._state._name=m;var D=k._state,h={component:k,properties:o,state:k._state};C&&yalla.framework.propertyCheckChanges(k._properties,o,n.bind(h)),k._properties=o,g("div",""),d("div"),function(t){function n(t){if(!t||0==t.length){var n={message:"No payment needs confirmation for now.",alertType:"info"};s.alert.render("object"==typeof arguments[1]?f(arguments[1],n):n,function(e,t){})}var r=t||[];r.forEach(function(t){g("span",""),d("span");var n={title:t.package.packageName,nofooter:"nofooter"};s.panel.render("object"==typeof arguments[1]?f(arguments[1],n):n,function(n,r){if("body"===n){g("span",""),d("span"),b("Travel Agency: "+t.travelAgent.travelAgentName),g("br",""),d("br"),u("br"),b("Travel Date: "+t.package.travelDateFrom.toStringDateRange(t.package.travelDateUntil)),g("br",""),d("br"),u("br"),b("Total passenger: "+(t.numberOfPassengers?t.numberOfPassengers:"")),g("br",""),d("br"),u("br"),b("Total Price: "+(t.totalPrice?t.totalPrice.toFormattedString():"")),g("br",""),d("br"),u("br"),b("From Bank: "+t.fromBank),g("br",""),d("br"),u("br"),b("Branch: "+t.fromBankBranch),g("br",""),d("br"),u("br"),b("Account No: "+t.fromAccountNumber),g("br",""),d("br"),u("br"),b("Account Name: "+t.fromAccountHolder),g("br",""),d("br"),u("br"),b("Amount: "+t.actualPayment.toFormattedString()),g("br",""),d("br"),u("br"),b("Transfer Date: "+(t.paymentDate?t.paymentDate.toDateComponents(!1,!0):"")),g("div",""),y("class","row"),d("div");var i={type:"button",name:"btnConfirm",value:"Confirm",divClass:"col-xs-6 col-sm-6 col-md-6 col-lg-6",onclick:function(n){var r={target:n.target};r.properties=o,"elements"in r.target&&(r.elements=r.target.elements),r.currentTarget=this==n.target?r.target:p(n.currentTarget),r.component=k,r.component._state=r.component._state||{},r.state=r.component._state,r.emitEvent=function(t,n){var a=new e(t,n,r.target,r.currentTarget);"on"+t in o&&o["on"+t](a)},a.bind(r)(t.id,!0)}};s.entry.render("object"==typeof arguments[1]?f(arguments[1],i):i,function(e,t){});var i={type:"button",name:"btnReject",value:"Reject",divClass:"col-xs-6 col-sm-6 col-md-6 col-lg-6",onclick:function(n){var r={target:n.target};r.properties=o,"elements"in r.target&&(r.elements=r.target.elements),r.currentTarget=this==n.target?r.target:p(n.currentTarget),r.component=k,r.component._state=r.component._state||{},r.state=r.component._state,r.emitEvent=function(t,n){var a=new e(t,n,r.target,r.currentTarget);"on"+t in o&&o["on"+t](a)},a.bind(r)(t.id,!1)}};s.entry.render("object"==typeof arguments[1]?f(arguments[1],i):i,function(e,t){}),u("div"),u("span")}}),u("span")})}var l=t.element,c={target:l};c.properties=o,"elements"in c.target&&(c.elements=c.target.elements),c.currentTarget=c.target,c.component=k,c.component._state=c.component._state||{},c.state=c.component._state;var m=r.bind(c)();m&&"object"==typeof m&&"then"in m?(v(),m.then(function(e){i(l,function(){n.call(c,e)})}).catch(function(e){console.log(e)})):n.call(c,m)}({element:IncrementalDOM.currentElement(),pointer:IncrementalDOM.currentPointer()}),u("div"),g("span",""),d("span"),yalla.framework.registerRef("alert",IncrementalDOM.currentElement(),function(){var e={message:D.alert.text.bind(self)(),alertType:D.alert.type.bind(self)()};s.alert.render("object"==typeof arguments[1]?f(arguments[1],e):e,function(e,t){})})(),u("span"),u("div")}var i=yalla.framework.renderToScreen,l=yalla.framework.createInjector("/dist/booking/paymentConfirmation"),c={},m="dist.booking.paymentConfirmation",s={},p=yalla.framework.getParentComponent,f=yalla.utils.merge,u=(IncrementalDOM.elementOpen,IncrementalDOM.elementClose),g=IncrementalDOM.elementOpenStart,d=IncrementalDOM.elementOpenEnd,b=(IncrementalDOM.elementVoid,IncrementalDOM.text),y=IncrementalDOM.attr,v=IncrementalDOM.skip;return"function"==typeof o&&(c.render=o),c}());