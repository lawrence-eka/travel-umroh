yalla.framework.addComponent("/dist/search-package/showPackage",function(){function e(e,t,n,a){this.data=t,this.target=n,this.type=e,this.currentTarget=a}function t(e){return{}}function n(e){}function t(e){return{packageId:e.packageId,alert:new Alert(null,s,"alert")}}function n(e){}function a(){var e=storage.me.read(),t=this;dpd.packages.get(t.state.packageId,function(n,a){if(t.state.alert.alert(a),!a){var r={userId:e.id,packageId:t.state.packageId,costTickets:n.costTickets,costLandArrangements:n.costLandArrangements};dpd.bookings.post(r,function(e,n){if(t.state.alert.alert(n),!n){var a=e.message?JSON.parse(e.message).booking.id:e.id;window.location.hash="#app/booking.home:bookingId="+a}})}})}function r(){var e=this;return new Promise(function(t){dpd.packages.get(e.state.packageId,function(n,a){e.state.alert.alert(a),a||c(n.travelAgentId,e).then(function(e){n.agent=e,t(n)})})})}function c(e,t){return new Promise(function(n){dpd.travelagents.get(e,function(e,a){t.state.alert.alert(a),a||n(e)})})}function o(){var e=this;return new Promise(function(t){var n={packageId:e.state.packageId,$sort:{fromDateTime:1}};dpd.itineraries.get(n,function(n,a){e.state.alert.alert(a),a||t(n)})})}function i(c,i){d.alert=l("/component/alert");d.alert;d["card-package"]=l("/package/card-package");d["card-package"];d["card-itinerary"]=l("/itinerary/card-itinerary");d["card-itinerary"];d["card-itineraryList"]=l("/itinerary/card-itineraryList");d["card-itineraryList"];d.entry=l("/component/entry");d.entry;k("link",""),h("element","dist.search-package.showPackage"),h("href","asset/css/custom-style.css"),h("rel","stylesheet"),y("link"),f("link"),k("div",""),h("element","dist.search-package.showPackage"),y("div");var m=IncrementalDOM.currentElement(),I=yalla.framework.validComponentName(m,p);m._state=m._state&&I?m._state:t.bind(m)(c),m._state._name=p;var w=m._state,O={component:m,properties:c,state:m._state};I&&yalla.framework.propertyCheckChanges(m._properties,c,n.bind(O)),m._properties=c,k("span",""),y("span"),yalla.framework.registerRef("alert",IncrementalDOM.currentElement(),function(){var e={alertType:w.alert.type.bind(self)(),message:w.alert.text.bind(self)()};d.alert.render("object"==typeof arguments[1]?u(arguments[1],e):e,function(e,t){})})(),f("span"),k("div",""),y("div"),function(e){function t(e){var t={pkg:e};d["card-package"].render("object"==typeof arguments[1]?u(arguments[1],t):t,function(e,t){})}var n=e.element,a={target:n};a.properties=c,"elements"in a.target&&(a.elements=a.target.elements),a.currentTarget=a.target,a.component=m,a.component._state=a.component._state||{},a.state=a.component._state;var o=r.bind(a)();o&&"object"==typeof o&&"then"in o?(v(),o.then(function(e){s(n,function(){t.call(a,e)})}).catch(function(e){console.log(e)})):t.call(a,o)}({element:IncrementalDOM.currentElement(),pointer:IncrementalDOM.currentPointer()}),f("div"),k("div",""),y("div"),function(t){function n(t){var n={itinerary:t,onbook:function(t){var n={target:t.target};n.properties=c,"elements"in n.target&&(n.elements=n.target.elements),n.currentTarget=this==t.target?n.target:g(t.currentTarget),n.component=m,n.component._state=n.component._state||{},n.state=n.component._state,n.emitEvent=function(t,a){var r=new e(t,a,n.target,n.currentTarget);"on"+t in c&&c["on"+t](r)},a.bind(n)()}};d["card-itineraryList"].render("object"==typeof arguments[1]?u(arguments[1],n):n,function(e,t){})}var r=t.element,i={target:r};i.properties=c,"elements"in i.target&&(i.elements=i.target.elements),i.currentTarget=i.target,i.component=m,i.component._state=i.component._state||{},i.state=i.component._state;var l=o.bind(i)();l&&"object"==typeof l&&"then"in l?(v(),l.then(function(e){s(r,function(){n.call(i,e)})}).catch(function(e){console.log(e)})):n.call(i,l)}({element:IncrementalDOM.currentElement(),pointer:IncrementalDOM.currentPointer()}),f("div"),f("div")}var s=yalla.framework.renderToScreen,l=yalla.framework.createInjector("/dist/search-package/showPackage"),m={},p="dist.search-package.showPackage",d={},g=yalla.framework.getParentComponent,u=yalla.utils.merge,f=(IncrementalDOM.elementOpen,IncrementalDOM.elementClose),k=IncrementalDOM.elementOpenStart,y=IncrementalDOM.elementOpenEnd,h=(IncrementalDOM.elementVoid,IncrementalDOM.text,IncrementalDOM.attr),v=IncrementalDOM.skip;return"function"==typeof i&&(m.render=i),m}());