yalla.framework.addComponent("/dist/package/edit-package",function(){function e(e,t,n,a){this.data=t,this.target=n,this.type=e,this.currentTarget=a}function t(e){return{}}function n(e){}function t(e){return{datePair:new DatePair(c),packageId:e.packageId,travelAgentId:e.travelAgentId,alert:new Alert}}function a(e){var t=this;return new Promise(function(n){if(e)dpd.packages.get(e,function(e,a){t.state.alert.alert(a),a?e={}:e||(e={travelAgentId:t.state.travelAgentId}),n(e)});else{var a={travelAgentId:t.state.travelAgentId};n(a)}})}function r(){var e=this.target.form,t=this,n={};n.id=e.elements.id.value,n.travelAgentId=e.elements.travelAgentId.value,n.packageName=e.elements.packageName.value,n.tourLeader=e.elements.tourLeader.value,n.validFrom=new Date(e.elements.validFrom.value).getTime(),n.validUntil=new Date(e.elements.validUntil.value).getTime(),n.costLandArrangements=e.elements.costLandArrangements.value,n.costTickets=e.elements.costTickets.value,n.isPublished=e.elements.isPublished.checked,""==e.elements.id.value?dpd.packages.post(n,function(e,n){o(e,n,t)}):dpd.packages.put(e.elements.id.value,n,function(e,n){o(e,n,t)})}function o(e,t,n){var a=n.target.form;n.state.alert.alert(t),t||(a.elements.id.value="",a.elements.travelAgentId.value="",a.elements.packageName.value="",a.elements.tourLeader.value="",a.elements.validFrom.value="",a.elements.validUntil.value="",a.elements.costLandArrangements.value="",a.elements.costTickets.value="",a.elements.isPublished.checked=!1,n.state.alert.alert(null),n.state.travelAgentId=null,n.emitEvent("close")),c()}function l(){this.emitEvent("close")}function i(o,i){f("link",""),k("element","dist.package.edit-package"),k("href","asset/css/custom-style.css"),k("rel","stylesheet"),y("link"),g("link"),p.alert=s("/component/alert");p.alert;p.entry=s("/component/entry");p.entry;p.panel=s("/component/panel");p.panel;f("div",""),k("element","dist.package.edit-package"),y("div");var m=IncrementalDOM.currentElement(),I=yalla.framework.validComponentName(m,d);m._state=m._state&&I?m._state:t.bind(m)(o),m._state._name=d;var h=m._state,D={component:m,properties:o,state:m._state};I&&yalla.framework.propertyCheckChanges(m._properties,o,n.bind(D)),m._properties=o;var T={title:h.packageId&&h.packageId!=-1?"Edit Package Info":"New Package",nofooter:"nofooter"};p.panel.render("object"==typeof arguments[1]?v(arguments[1],T):T,function(t,n){"body"===t&&(f("div",""),y("div"),function(t){function n(t){f("form",""),y("form");var n={type:"hidden",name:"id",value:t.id};p.entry.render("object"==typeof arguments[1]?v(arguments[1],n):n,function(e,t){});var n={type:"hidden",name:"travelAgentId",value:t.travelAgentId};p.entry.render("object"==typeof arguments[1]?v(arguments[1],n):n,function(e,t){}),f("div",""),k("class","row"),y("div");var n={type:"text",name:"packageName",prompt:"Package Name",value:t.packageName};p.entry.render("object"==typeof arguments[1]?v(arguments[1],n):n,function(e,t){});var n={type:"text",name:"tourLeader",prompt:"Tour Leader",value:t.tourLeader};p.entry.render("object"==typeof arguments[1]?v(arguments[1],n):n,function(e,t){});var n={type:"hidden",name:"validFrom",naked:"naked",value:t.validFrom?t.validFrom.toYYYYMMDD():h.datePair.defaultStartDate(),min:h.datePair.minStartDate.bind(s)(),onfocusout:function(t){var n={target:t.target};n.properties=o,"elements"in n.target&&(n.elements=n.target.elements),n.currentTarget=this==t.target?n.target:u(t.currentTarget),n.component=m,n.component._state=n.component._state||{},n.state=n.component._state,n.emitEvent=function(t,a){var r=new e(t,a,n.target,n.currentTarget);"on"+t in o&&o["on"+t](r)},h.datePair.onStartDateFocusOut.bind(n)("validUntil")}};p.entry.render("object"==typeof arguments[1]?v(arguments[1],n):n,function(e,t){}),f("span",""),y("span"),yalla.framework.registerRef("validUntil",IncrementalDOM.currentElement(),function(){var e={type:"date",name:"validUntil",prompt:"Registeration Open Until",value:t.validUntil?t.validUntil.toYYYYMMDD():h.datePair.defaultEndDate(),min:h.datePair.minEndDate.bind(s)()};p.entry.render("object"==typeof arguments[1]?v(arguments[1],e):e,function(e,t){})})(),g("span");var n={type:"number",name:"costLandArrangements",prompt:"Land Arrangements (Rp)",value:t.costLandArrangements};p.entry.render("object"==typeof arguments[1]?v(arguments[1],n):n,function(e,t){});var n={type:"number",name:"costTickets",prompt:"Tickets (Rp)",value:t.costTickets};p.entry.render("object"==typeof arguments[1]?v(arguments[1],n):n,function(e,t){});var n={type:"checkbox",name:"isPublished",prompt:"Published",checked:t.isPublished};p.entry.render("object"==typeof arguments[1]?v(arguments[1],n):n,function(e,t){});var n={type:"button",value:h.packageId?"Save":"Register",divClass:"col-xs-6 col-sm-6 col-md-6 col-lg-6",onclick:function(t){var n={target:t.target};n.properties=o,"elements"in n.target&&(n.elements=n.target.elements),n.currentTarget=this==t.target?n.target:u(t.currentTarget),n.component=m,n.component._state=n.component._state||{},n.state=n.component._state,n.emitEvent=function(t,a){var r=new e(t,a,n.target,n.currentTarget);"on"+t in o&&o["on"+t](r)},r.bind(n)()}};p.entry.render("object"==typeof arguments[1]?v(arguments[1],n):n,function(e,t){});var n={type:"button",value:"Cancel",divClass:"col-xs-6 col-sm-6 col-md-6 col-lg-6",onclick:function(t){var n={target:t.target};n.properties=o,"elements"in n.target&&(n.elements=n.target.elements),n.currentTarget=this==t.target?n.target:u(t.currentTarget),n.component=m,n.component._state=n.component._state||{},n.state=n.component._state,n.emitEvent=function(t,a){var r=new e(t,a,n.target,n.currentTarget);"on"+t in o&&o["on"+t](r)},l.bind(n)()}};p.entry.render("object"==typeof arguments[1]?v(arguments[1],n):n,function(e,t){}),g("div");var n={alertType:h.alert.type.bind(s)(),message:h.alert.text.bind(s)()};p.alert.render("object"==typeof arguments[1]?v(arguments[1],n):n,function(e,t){}),g("form")}var i=t.element,s={target:i};s.properties=o,"elements"in s.target&&(s.elements=s.target.elements),s.currentTarget=s.target,s.component=m,s.component._state=s.component._state||{},s.state=s.component._state;var d=a.bind(s)(h.packageId);d&&"object"==typeof d&&"then"in d?(b(),d.then(function(e){c(i,function(){n.call(s,e)})}).catch(function(e){console.log(e)})):n.call(s,d)}({element:IncrementalDOM.currentElement(),pointer:IncrementalDOM.currentPointer()}),g("div"))}),g("div")}var c=yalla.framework.renderToScreen,s=yalla.framework.createInjector("/dist/package/edit-package"),m={},d="dist.package.edit-package",p={},u=yalla.framework.getParentComponent,v=yalla.utils.merge,g=(IncrementalDOM.elementOpen,IncrementalDOM.elementClose),f=IncrementalDOM.elementOpenStart,y=IncrementalDOM.elementOpenEnd,k=(IncrementalDOM.elementVoid,IncrementalDOM.text,IncrementalDOM.attr),b=IncrementalDOM.skip;return"function"==typeof i&&(m.render=i),m}());