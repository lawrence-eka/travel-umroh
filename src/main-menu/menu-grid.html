<inject from="/main-menu/menu-block" name="menu-block"></inject>

<div>
    <div class="row menu-grid">
        <span for.each="item in mainMenu()">
            <menu-block icon.bind="item.icon" text.bind="item.short" click.trigger="(item.addr? onClick(item.addr) : onLogin())"></menu-block>
        </span>
    </div>
</div>

<script>
    function onClick(path){
        window.location.hash = path;
    }

    function onLogin(){
        if(storage.me.read()) {
            dpd.users.logout(function (err) {
                //debugger;
                storage.me.erase();
                window.location.hash = '#app';
            });
        }
        else {
            window.location.hash = '#user.login-form';
        }
    }
</script>