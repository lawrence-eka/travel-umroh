<inject from="/component/navbar" name="navbar"></inject>

<div class="container" name="universe" created.trigger="onCreated()" deleted.trigger="onDeleted()">
    <div data.load="checkCurrentUser()"  name="motherNature">
        <navbar></navbar>
        <slot-view></slot-view>
    </div>
</div>

<script>
    function checkCurrentUser(){
    	return storage.me.read();
    }

    function onCreated() {
        console.log('debugger');
    }

    var popupManager = {
	    setPopup: function(element) {
            debugger;
            console.log('hi');
        }
    };

    document.addEventListener('touchmove', function(event){if(event.scale !==1){event.preventDefault();}}, false);
	var lastTouchEnd = 0;
	document.addEventListener('touchend', function (event) {
	  var now = (new Date()).getTime();
	  if (now - lastTouchEnd <= 300) {
	    event.preventDefault();
	  }
	  lastTouchEnd = now;
	}, false);

</script>